version: '3.8'

services:
  certbot-desec:
    image: ghcr.io/samevansturner/docker-desec-certbot:latest
    container_name: certbot-desec
    restart: unless-stopped
    # SECURITY: Run as non-root user (recommended)
    # Replace with your host user's UID:GID (find with: id -u && id -g)
    user: "1000:1000"
    environment:
      - EMAIL=${EMAIL}
      - DOMAINS=${DOMAINS}
      - DESEC_TOKEN=${DESEC_TOKEN}
      - TZ=${TZ:-UTC}
    volumes:
      - ./letsencrypt:/etc/letsencrypt
      - ./certs:/certs

# Quick Start:
# 1. Copy .env.example to .env and configure your values
# 2. Find your user ID: id -u (e.g., 1000)
# 3. Update 'user:' above with your UID:GID
# 4. Create directories: mkdir -p letsencrypt certs
# 5. Set permissions: sudo chown -R YOUR_UID:YOUR_GID letsencrypt certs
# 6. Start: docker-compose up -d
#
# To use a different existing user:
#   id -u username  # Get their UID
#   id -g username  # Get their GID
#   Update 'user:' above and set directory ownership accordingly
#
# To run as root (NOT recommended):
#   Comment out or remove the 'user:' line above
